"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.getAssetPairsTicker = exports.getAssetPairTickerOriginal = void 0;
/// <reference lib="DOM" />
const pairConversion_1 = require("./pairConversion");
/**
 * Get current original kraken asset pairs result
 *
 * @code
 * ```
 * const bitcoin = getAssetPairTickerOriginal('XBTUSD');
 * const bitcoinEth = getAssetPairTickerOriginal('XBTUSD', 'XETHXXBT');
 * ```
 */
const getAssetPairTickerOriginal = async (...pairs) => {
    const request = await fetch("https://api.kraken.com/0/public/Ticker?pair=" + pairs.join(","));
    const response = await request.text();
    return JSON.parse(response.replace(/\%$/, ""));
};
exports.getAssetPairTickerOriginal = getAssetPairTickerOriginal;
/**
 * Get multiple asset pairs result in a signgle request
 *
 * @code
 * ```
 * const bitcoinEth = getAssetPairsTicker('XBTUSD', 'XETHXXBT');
 * console.log(bitcoinEth.XBTUSD);
 * ```
 */
const getAssetPairsTicker = async (...pairs) => {
    const response = await exports.getAssetPairTickerOriginal(...pairs);
    if (response.error && response.error.length) {
        return Promise.reject(response.error);
    }
    return pairConversion_1.convertToObjectNotation(response.result);
};
exports.getAssetPairsTicker = getAssetPairsTicker;
