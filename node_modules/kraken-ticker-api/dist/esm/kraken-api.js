/// <reference lib="DOM" />
import { convertToObjectNotation } from "./pairConversion";
/**
 * Get current original kraken asset pairs result
 *
 * @code
 * ```
 * const bitcoin = getAssetPairTickerOriginal('XBTUSD');
 * const bitcoinEth = getAssetPairTickerOriginal('XBTUSD', 'XETHXXBT');
 * ```
 */
export const getAssetPairTickerOriginal = async (...pairs) => {
    const request = await fetch("https://api.kraken.com/0/public/Ticker?pair=" + pairs.join(","));
    const response = await request.text();
    return JSON.parse(response.replace(/\%$/, ""));
};
/**
 * Get multiple asset pairs result in a signgle request
 *
 * @code
 * ```
 * const bitcoinEth = getAssetPairsTicker('XBTUSD', 'XETHXXBT');
 * console.log(bitcoinEth.XBTUSD);
 * ```
 */
export const getAssetPairsTicker = async (...pairs) => {
    const response = await getAssetPairTickerOriginal(...pairs);
    if (response.error && response.error.length) {
        return Promise.reject(response.error);
    }
    return convertToObjectNotation(response.result);
};
